<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¸•é‡‘æ£®ç—…è¯Šæ–­å·¥å…· - 2015 MDSæ ‡å‡†</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 15px;
            padding-bottom: 270px; /* ä¿®æ”¹ä¸º270px */
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .header p {
            color: #7f8c8d;
            font-size: 1.1em;
        }

        .diagnosis-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            padding: 15px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.15);
            z-index: 1000;
            border-top: 3px solid #3498db;
        }

        .diagnosis-result {
            max-width: 900px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 12px;
            align-items: center;
        }

        .diagnosis-main {
            grid-column: 1 / span 4;
            text-align: center;
        }

        .diagnosis-details {
            grid-column: 1 / span 4;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr;
            gap: 12px;
        }

        .diagnosis-details .result-item {
            min-width: 0;
            width: 100%;
        }

        .result-item {
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            font-weight: bold;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .result-item div:first-child {
            font-size: 0.85em;
            margin-bottom: 4px;
        }

        .result-item div:last-child {
            font-size: 1em;
        }

        .result-confirmed {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }

        .result-probable {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
        }

        .result-not-met {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .result-pending {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
        }

        .reset-button {
            grid-column: 1 / span 4;
            justify-self: center;
            margin-top: 10px;
            background: linear-gradient(135deg, #9b59b6, #8e44ad);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 13px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
            white-space: nowrap;
        }

        .reset-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.3);
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .section {
            margin-bottom: 0;
            border-bottom: 1px solid #ecf0f1;
        }

        .section:last-child {
            border-bottom: none;
        }

        .section-header {
            padding: 25px 30px;
            font-size: 1.4em;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .core-symptoms { background: linear-gradient(135deg, #3498db, #2980b9); }
        .support-criteria { background: linear-gradient(135deg, #27ae60, #229954); }
        .exclusion-criteria { background: linear-gradient(135deg, #e74c3c, #c0392b); }
        .red-flags { background: linear-gradient(135deg, #f39c12, #d68910); }

        .section-content {
            padding: 30px;
        }

        .criterion {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #3498db;
            transition: all 0.3s ease;
            cursor: pointer;
            user-select: none;
        }

        .criterion:hover {
            background: #e8f4f8;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .criterion input[type="checkbox"] {
            margin-right: 15px;
            transform: scale(1.3);
            cursor: pointer;
            pointer-events: none;
        }

        .criterion label {
            flex: 1;
            cursor: pointer;
            font-size: 1.05em;
            line-height: 1.5;
            pointer-events: none;
        }

        .core-symptoms .criterion { border-left-color: #3498db; }
        .support-criteria .criterion { border-left-color: #27ae60; }
        .exclusion-criteria .criterion { border-left-color: #e74c3c; }
        .red-flags .criterion { border-left-color: #f39c12; }

        .criterion.checked {
            background: #f8f9fa;
            border-left-width: 4px;
        }

        .exclusion-criteria .criterion.checked {
            background: #f8f9fa;
        }

        .red-flags .criterion.checked {
            background: #f8f9fa;
        }

        .support-criteria .criterion.checked {
            background: #f8f9fa;
        }

        .note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 30px;
            font-style: italic;
            color: #856404;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
                padding-bottom: 240px;
            }

            .diagnosis-result {
                display: flex;
                flex-direction: column;
                gap: 6px;
            }

            .diagnosis-main {
                order: 1;
                width: 100%;
            }

            .diagnosis-details {
                order: 2;
                width: 100%;
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 4px;
            }

            .reset-button {
                order: 3;
                width: 100%;
                margin-top: 6px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            .diagnosis-panel {
                padding: 8px;
            }

            .result-item {
                padding: 8px 4px;
                font-size: 0.8em;
            }

            .result-item div:first-child {
                font-size: 0.75em;
                margin-bottom: 2px;
            }

            .result-item div:last-child {
                font-size: 0.9em;
            }

            .reset-button {
                padding: 8px 12px;
                font-size: 12px;
            }

            .section-content {
                padding: 20px;
            }

            .criterion {
                flex-direction: column;
                align-items: flex-start;
                padding: 12px;
                margin-bottom: 15px;
            }

            .criterion input[type="checkbox"] {
                margin-bottom: 8px;
            }

            .criterion label {
                font-size: 0.95em;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 8px;
                padding-bottom: 200px; /* ä¿®æ”¹ä¸º200px */
            }

            .header h1 {
                font-size: 1.6em;
            }

            .diagnosis-panel {
                padding: 6px;
            }

            .diagnosis-details {
                grid-template-columns: 1fr 1fr;
                gap: 3px;
            }

            .result-item {
                padding: 6px 3px;
                font-size: 0.75em;
            }

            .result-item div:first-child {
                font-size: 0.7em;
                margin-bottom: 1px;
            }

            .result-item div:last-child {
                font-size: 0.85em;
            }

            .reset-button {
                padding: 6px 10px;
                font-size: 11px;
                margin-top: 4px;
            }

            .section-header {
                padding: 15px 20px;
                font-size: 1.1em;
            }

            .section-content {
                padding: 15px;
            }

            .criterion {
                padding: 10px;
                margin-bottom: 10px;
            }

            .criterion label {
                font-size: 0.9em;
            }
        }

        @media (max-width: 360px) {
            body {
                padding: 5px;
                padding-bottom: 200px;
            }

            .header h1 {
                font-size: 1.4em;
            }

            .diagnosis-panel {
                padding: 5px;
            }

            .diagnosis-details {
                grid-template-columns: 1fr 1fr;
                gap: 2px;
            }

            .result-item {
                padding: 4px 2px;
                font-size: 0.7em;
            }

            .result-item div:first-child {
                font-size: 0.65em;
                margin-bottom: 1px;
            }

            .result-item div:last-child {
                font-size: 0.8em;
            }

            .reset-button {
                padding: 5px 8px;
                font-size: 10px;
                margin-top: 3px;
            }

            .section-content {
                padding: 12px;
            }

            .criterion {
                padding: 8px;
                margin-bottom: 8px;
            }

            .criterion label {
                font-size: 0.85em;
            }
        }
    </style>
</head>
<body>
    <div class="diagnosis-panel">
        <div class="diagnosis-result">
            <div class="diagnosis-main">
                <div class="result-item" id="finalResult">
                    <div>è¯Šæ–­ç»“æœ</div>
                    <div id="finalStatus">å¾…è¯„ä¼°</div>
                </div>
            </div>
            <div class="diagnosis-details">
                <div class="result-item" id="coreResult">
                    <div>æ ¸å¿ƒç—‡çŠ¶</div>
                    <div id="coreStatus">å¾…è¯„ä¼°</div>
                </div>
                <div class="result-item" id="supportCount">
                    <div>æ”¯æŒæ ‡å‡†</div>
                    <div id="supportStatus">0/4</div>
                </div>
                <div class="result-item" id="exclusionCount">
                    <div>æ’é™¤æ ‡å‡†</div>
                    <div id="exclusionStatus">0/9</div>
                </div>
                <div class="result-item" id="redFlagCount">
                    <div>è­¦ç¤ºå¾è±¡</div>
                    <div id="redFlagStatus">0/10</div>
                </div>
            </div>
            <button class="reset-button" onclick="resetAll()">é‡ç½®æ‰€æœ‰é€‰é¡¹</button>
        </div>
    </div>

    <div class="header">
        <h1>å¸•é‡‘æ£®ç—…è¯Šæ–­å·¥å…·</h1>
        <p>åŸºäº2015å¹´å›½é™…è¿åŠ¨éšœç¢å­¦ä¼š(MDS)è¯Šæ–­æ ‡å‡†</p>
    </div>

    <div class="container">
        <div class="section core-symptoms">
            <div class="section-header">
                <i>ğŸ§ </i> æ ¸å¿ƒç—‡çŠ¶ (å¿…é¡»æœ‰è¿åŠ¨è¿Ÿç¼“ + é™æ­¢æ€§éœ‡é¢¤æˆ–è‚Œå¼ºç›´ä¹‹ä¸€)
            </div>
            <div class="section-content">
                <div class="criterion" onclick="toggleCheckbox('core1')">
                    <input type="checkbox" id="core1">
                    <label for="core1">è¿åŠ¨è¿Ÿç¼“ (å¿…éœ€æ¡ä»¶)</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('core2')">
                    <input type="checkbox" id="core2">
                    <label for="core2">è‚Œå¼ºç›´</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('core3')">
                    <input type="checkbox" id="core3">
                    <label for="core3">é™æ­¢æ€§éœ‡é¢¤</label>
                </div>
            </div>
        </div>

        <div class="section support-criteria">
            <div class="section-header">
                <i>âœ…</i> æ”¯æŒæ ‡å‡† (ç¡®è¯Šéœ€â‰¥2æ¡ï¼Œå¾ˆå¯èƒ½éœ€>è­¦ç¤ºå¾è±¡æ•°)
            </div>
            <div class="section-content">
                <div class="criterion" onclick="toggleCheckbox('support1')">
                    <input type="checkbox" id="support1">
                    <label for="support1">å·¦æ—‹å¤šå·´æ˜æ˜¾æœ‰æ•ˆï¼Œå­˜åœ¨"å¼€"ã€"å…³"çŠ¶æ€</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('support2')">
                    <input type="checkbox" id="support2">
                    <label for="support2">å¼‚åŠ¨ç—‡</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('support3')">
                    <input type="checkbox" id="support3">
                    <label for="support3">ä½“æ£€è§‚å¯Ÿåˆ°é™æ­¢æ€§éœ‡é¢¤ï¼ˆæ—¢å¾€æˆ–æœ¬æ¬¡ï¼‰</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('support4')">
                    <input type="checkbox" id="support4">
                    <label for="support4">è¾…æ£€é˜³æ€§ï¼šå—…è§‰å‡é€€æˆ–ä¸§å¤±ï¼›TCSï¼ŒMIBG</label>
                </div>
            </div>
        </div>

        <div class="section exclusion-criteria">
            <div class="section-header">
                <i>âŒ</i> ç»å¯¹æ’é™¤æ ‡å‡† (ä»»ä¸€æ¡å­˜åœ¨å³æ’é™¤è¯Šæ–­)
            </div>
            <div class="section-content">
                <div class="criterion" onclick="toggleCheckbox('exclusion1')">
                    <input type="checkbox" id="exclusion1">
                    <label for="exclusion1">å°è„‘æ€§å…±æµå¤±è°ƒæˆ–çœ¼åŠ¨å¼‚å¸¸</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('exclusion2')">
                    <input type="checkbox" id="exclusion2">
                    <label for="exclusion2">å‘ä¸‹çš„å‚ç›´æ€§æ ¸ä¸Šæ€§å‡è§†éº»ç—¹æˆ–é€‰æ‹©æ€§çš„å‘ä¸‹å‚ç›´æ€§æ‰«è§†å‡æ…¢</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('exclusion3')">
                    <input type="checkbox" id="exclusion3">
                    <label for="exclusion3">å‘ç—…5å¹´å†…è¢«è¯Šæ–­é«˜åº¦æ€€ç–‘çš„è¡Œä¸ºå˜å¼‚å‹é¢é¢å¶ç—´å‘†æˆ–åŸå‘æ€§è¿›è¡Œæ€§å¤±è¯­</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('exclusion4')">
                    <input type="checkbox" id="exclusion4">
                    <label for="exclusion4">å‘ç—…3å¹´å†…å±€é™äºä¸‹è‚¢å¸•é‡‘æ£®æ ·ç—‡</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('exclusion5')">
                    <input type="checkbox" id="exclusion5">
                    <label for="exclusion5">å¤šå·´èƒºå—ä½“é˜»æ»å‰‚æˆ–è€—ç«­å‰‚æ²»ç–—è¯±å‘çš„å¸•é‡‘æ£®ç»¼åˆå¾</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('exclusion6')">
                    <input type="checkbox" id="exclusion6">
                    <label for="exclusion6">ç—…æƒ…ä¸­ç­‰ä¸¥é‡ï¼ˆè‚Œå¼ºç›´æˆ–è¿åŠ¨è¿Ÿç¼“è®¡åˆ†å¤§äº2åˆ†ï¼‰ï¼Œä½†é«˜å‰‚é‡å·¦æ—‹å¤šå·´ç¼ºä¹æ˜¾è‘—åº”ç­”</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('exclusion7')">
                    <input type="checkbox" id="exclusion7">
                    <label for="exclusion7">å­˜åœ¨æ˜ç¡®çš®è´¨å¤åˆæ„Ÿè§‰ä¸§å¤±ï¼Œè‚¢ä½“è§‚å¿µè¿åŠ¨æ€§å¤±ç”¨æˆ–è¿›è¡Œæ€§å¤±è¯­</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('exclusion8')">
                    <input type="checkbox" id="exclusion8">
                    <label for="exclusion8">åˆ†å­ç¥ç»å½±åƒå­¦æ£€æŸ¥çªè§¦å‰å¤šå·´èƒºèƒ½ç³»ç»ŸåŠŸèƒ½æ­£å¸¸</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('exclusion9')">
                    <input type="checkbox" id="exclusion9">
                    <label for="exclusion9">å­˜åœ¨æ˜ç¡®å¯¼è‡´å¸•é‡‘æ£®ç»¼åˆå¾çš„å…¶ä»–ç–¾ç—…ï¼Œæˆ–ä¸“å®¶åˆ¤æ–­å¯èƒ½ä¸ºå…¶ä»–ç»¼åˆå¾</label>
                </div>
            </div>
        </div>

        <div class="section red-flags">
            <div class="section-header">
                <i>âš ï¸</i> è­¦ç¤ºå¾è±¡ (å¾ˆå¯èƒ½è¯Šæ–­éœ€â‰¤2æ¡ä¸”<æ”¯æŒæ ‡å‡†æ•°)
            </div>
            <div class="section-content">
                <div class="criterion" onclick="toggleCheckbox('redflag1')">
                    <input type="checkbox" id="redflag1">
                    <label for="redflag1">å‘ç—…5å¹´å†…å¿«é€Ÿè¿›å±•çš„æ­¥æ€éšœç¢ï¼Œä»¥è‡´éœ€å¸¸ç”¨è½®æ¤…</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('redflag2')">
                    <input type="checkbox" id="redflag2">
                    <label for="redflag2">å‘ç—…5å¹´å†…å‡ºç°çƒéº»ç—¹</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('redflag3')">
                    <input type="checkbox" id="redflag3">
                    <label for="redflag3">å‘ç—…5å¹´å†…å‡ºç°ä¸¥é‡è‡ªä¸»ç¥ç»åŠŸèƒ½éšœç¢ï¼šä½“ä½æ€§ä½è¡€å‹ã€å°¿æ½´ç•™æˆ–å°¿å¤±ç¦ã€å‹ƒèµ·éšœç¢</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('redflag4')">
                    <input type="checkbox" id="redflag4">
                    <label for="redflag4">è¿åŠ¨ç—‡çŠ¶æˆ–ä½“å¾å‘ç—…5å¹´å†…æˆ–ä»¥ä¸Šä¸è¿›å±•ï¼Œé™¤éä¸æ²»ç–—æœ‰å…³</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('redflag5')">
                    <input type="checkbox" id="redflag5">
                    <label for="redflag5">å‘ç—…3å¹´å†…åå¤è·Œå€’ï¼ˆå¤§äº1æ¬¡/å¹´ï¼‰</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('redflag6')">
                    <input type="checkbox" id="redflag6">
                    <label for="redflag6">å‘ç—…10å¹´å†…å‡ºç°ä¸æˆæ¯”ä¾‹çš„é¢ˆéƒ¨å‰å€¾æˆ–æ‰‹è¶³æŒ›ç¼©</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('redflag7')">
                    <input type="checkbox" id="redflag7">
                    <label for="redflag7">èµ·ç—…æˆ–ç—…ç¨‹è¡¨ç°ä¸ºåŒä¾§å¯¹ç§°æ€§å¸•é‡‘æ£®ç»¼åˆå¾ç—‡çŠ¶ï¼Œæ— ä¾§åˆ«ä¼˜åŠ¿</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('redflag8')">
                    <input type="checkbox" id="redflag8">
                    <label for="redflag8">å‡ºç°ä¸èƒ½è§£é‡Šçš„é”¥ä½“æŸå¾</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('redflag9')">
                    <input type="checkbox" id="redflag9">
                    <label for="redflag9">å‘ç—…5å¹´å†…ä¸å‡ºç°ä»»ä¸€å¸¸è§éè¿åŠ¨ç—‡çŠ¶ï¼šå—…è§‰ï¼Œç¡çœ ï¼ˆç»´æŒæ€§å¤±çœ ã€æ—¥é—´è¿‡åº¦å—œç¡ã€RBDï¼‰</label>
                </div>
                <div class="criterion" onclick="toggleCheckbox('redflag10')">
                    <input type="checkbox" id="redflag10">
                    <label for="redflag10">å‘ç—…5å¹´å†…ä¸å‡ºç°è‡ªä¸»ç¥ç»åŠŸèƒ½éšœç¢ï¼ˆä¾¿ç§˜ã€æ—¥é—´å°¿æ€¥ã€ä½“ä½æ€§ä½è¡€å‹ï¼‰æˆ–ç²¾ç¥éšœç¢ï¼ˆæŠ‘éƒã€ç„¦è™‘ã€å¹»è§‰ï¼‰</label>
                </div>
            </div>
        </div>

        <div class="note">
            <strong>è¯Šæ–­æ ‡å‡†ï¼š</strong><br>
            â€¢ <strong>ä¸´åºŠç¡®è¯Šï¼š</strong> æ ¸å¿ƒç—‡çŠ¶æ»¡è¶³ + æ— ç»å¯¹æ’é™¤æ ‡å‡† + æ— è­¦ç¤ºå¾è±¡ + æ”¯æŒæ ‡å‡†â‰¥2æ¡<br>
            â€¢ <strong>ä¸´åºŠå¾ˆå¯èƒ½ï¼š</strong> æ ¸å¿ƒç—‡çŠ¶æ»¡è¶³ + æ— ç»å¯¹æ’é™¤æ ‡å‡† + è­¦ç¤ºå¾è±¡â‰¤2æ¡ + æ”¯æŒæ ‡å‡†æ•°>è­¦ç¤ºå¾è±¡æ•°
        </div>
    </div>

    <script>
        function toggleCheckbox(checkboxId) {
            const checkbox = document.getElementById(checkboxId);
            checkbox.checked = !checkbox.checked;
            updateDiagnosis();
        }
        
        function updateDiagnosis() {
            // æ›´æ–°é€‰ä¸­çŠ¶æ€çš„è§†è§‰æ•ˆæœ
            updateVisualStates();
            
            // æ ¸å¿ƒç—‡çŠ¶è¯„ä¼°
            const bradykinesia = document.getElementById('core1').checked;
            const rigidity = document.getElementById('core2').checked;
            const tremor = document.getElementById('core3').checked;
            
            const coreSymptomsMet = bradykinesia && (rigidity || tremor);
            
            // è®¡ç®—æ”¯æŒæ ‡å‡†æ•°é‡
            let supportCount = 0;
            for (let i = 1; i <= 4; i++) {
                if (document.getElementById(`support${i}`).checked) {
                    supportCount++;
                }
            }
            
            // è®¡ç®—ç»å¯¹æ’é™¤æ ‡å‡†æ•°é‡
            let exclusionCount = 0;
            for (let i = 1; i <= 9; i++) {
                if (document.getElementById(`exclusion${i}`).checked) {
                    exclusionCount++;
                }
            }
            
            // è®¡ç®—è­¦ç¤ºå¾è±¡æ•°é‡
            let redFlagCount = 0;
            for (let i = 1; i <= 10; i++) {
                if (document.getElementById(`redflag${i}`).checked) {
                    redFlagCount++;
                }
            }
            
            // æ›´æ–°è®¡æ•°æ˜¾ç¤º
            document.getElementById('supportStatus').textContent = `${supportCount}/4`;
            document.getElementById('exclusionStatus').textContent = `${exclusionCount}/9`;
            document.getElementById('redFlagStatus').textContent = `${redFlagCount}/10`;
            
            // æ›´æ–°æ ¸å¿ƒç—‡çŠ¶çŠ¶æ€
            const coreResult = document.getElementById('coreResult');
            const coreStatus = document.getElementById('coreStatus');
            
            if (coreSymptomsMet) {
                coreStatus.textContent = 'æ»¡è¶³';
                coreResult.className = 'result-item result-confirmed';
            } else {
                coreStatus.textContent = 'ä¸æ»¡è¶³';
                coreResult.className = 'result-item result-not-met';
            }
            
            // è¯Šæ–­é€»è¾‘
            const finalResult = document.getElementById('finalResult');
            const finalStatus = document.getElementById('finalStatus');
            
            if (!coreSymptomsMet) {
                finalStatus.textContent = 'ä¸ç¬¦åˆè¯Šæ–­';
                finalResult.className = 'result-item result-not-met';
            } else if (exclusionCount > 0) {
                finalStatus.textContent = 'æ’é™¤è¯Šæ–­';
                finalResult.className = 'result-item result-not-met';
            } else if (supportCount >= 2 && redFlagCount === 0) {
                finalStatus.textContent = 'ä¸´åºŠç¡®è¯Š';
                finalResult.className = 'result-item result-confirmed';
            } else if (redFlagCount <= 2 && supportCount > redFlagCount) {
                finalStatus.textContent = 'ä¸´åºŠå¾ˆå¯èƒ½';
                finalResult.className = 'result-item result-probable';
            } else {
                finalStatus.textContent = 'ä¸æ»¡è¶³è¯Šæ–­';
                finalResult.className = 'result-item result-not-met';
            }
            
            // æ›´æ–°æ”¯æŒæ ‡å‡†ã€æ’é™¤æ ‡å‡†ã€è­¦ç¤ºå¾è±¡çš„é¢œè‰²
            const supportCountEl = document.getElementById('supportCount');
            const exclusionCountEl = document.getElementById('exclusionCount');
            const redFlagCountEl = document.getElementById('redFlagCount');
            
            // æ”¯æŒæ ‡å‡†é¢œè‰²
            if (supportCount >= 2) {
                supportCountEl.className = 'result-item result-confirmed';
            } else if (supportCount > 0) {
                supportCountEl.className = 'result-item result-probable';
            } else {
                supportCountEl.className = 'result-item result-pending';
            }
            
            // æ’é™¤æ ‡å‡†é¢œè‰²
            if (exclusionCount > 0) {
                exclusionCountEl.className = 'result-item result-not-met';
            } else {
                exclusionCountEl.className = 'result-item result-confirmed';
            }
            
            // è­¦ç¤ºå¾è±¡é¢œè‰²
            if (redFlagCount > 2) {
                redFlagCountEl.className = 'result-item result-not-met';
            } else if (redFlagCount > 0) {
                redFlagCountEl.className = 'result-item result-probable';
            } else {
                redFlagCountEl.className = 'result-item result-confirmed';
            }
        }
        
        function updateVisualStates() {
            // æ›´æ–°æ‰€æœ‰é€‰é¡¹çš„è§†è§‰çŠ¶æ€
            const allCheckboxes = document.querySelectorAll('input[type="checkbox"]');
            allCheckboxes.forEach(checkbox => {
                const criterion = checkbox.closest('.criterion');
                if (checkbox.checked) {
                    criterion.classList.add('checked');
                } else {
                    criterion.classList.remove('checked');
                }
            });
        }
        
        function resetAll() {
            // é‡ç½®æ‰€æœ‰å¤é€‰æ¡†
            const allCheckboxes = document.querySelectorAll('input[type="checkbox"]');
            allCheckboxes.forEach(checkbox => {
                checkbox.checked = false;
            });
            
            // é‡ç½®æ‰€æœ‰è§†è§‰çŠ¶æ€
            const allCriteria = document.querySelectorAll('.criterion');
            allCriteria.forEach(criterion => {
                criterion.classList.remove('checked');
            });
            
            // é‡ç½®è¯Šæ–­ç»“æœ
            document.getElementById('coreStatus').textContent = 'å¾…è¯„ä¼°';
            document.getElementById('finalStatus').textContent = 'å¾…è¯„ä¼°';
            document.getElementById('supportStatus').textContent = '0/4';
            document.getElementById('exclusionStatus').textContent = '0/9';
            document.getElementById('redFlagStatus').textContent = '0/10';
            
            // é‡ç½®ç»“æœé¢æ¿é¢œè‰²
            const resultItems = document.querySelectorAll('.result-item');
            resultItems.forEach(item => {
                if (!item.querySelector('button')) { // ä¸åŒ…æ‹¬é‡ç½®æŒ‰é’®
                    item.className = 'result-item result-pending';
                }
            });
        }
        
        // åˆå§‹åŒ–
        updateDiagnosis();
    </script>
</body>
</html>